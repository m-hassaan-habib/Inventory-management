{% extends "base.html" %}
{% block content %}
<h1>Reports</h1>
<div class="filters">
  <form method="get">
    From <input type="date" name="from" value="{{ request.args.get('from','') }}">
    To <input type="date" name="to" value="{{ request.args.get('to','') }}">
    <select name="vendor_id">
      <option value="">All Vendors</option>
      {% for v in vendors %}
        <option value="{{ v.id }}" {% if request.args.get('vendor_id') == v.id|string %}selected{% endif %}>
          {{ v.name }}
        </option>
      {% endfor %}
    </select>
    <button type="submit">Filter</button>
  </form>
</div>

<div class="cards">
  <div class="card">Total Invoices: {{ summary.total_invoices }}</div>
  <div class="card">Total Revenue: ${{ summary.total_revenue }}</div>
  <div class="card">Total Items: {{ summary.total_items }}</div>
</div>

<table class="table">
  <tr><th>Invoice #</th><th>Vendor</th><th>Date</th><th>Status</th><th>Items</th><th>Amount</th></tr>
  {% for inv in invoices %}
  <tr>
    <td>{{ inv.invoice_number }}</td>
    <td>{{ inv.vendor_name }}</td>
    <td>{{ inv.invoice_date }}</td>
    <td><span class="badge {{ inv.status|lower }}">{{ inv.status }}</span></td>
    <td>{{ inv.total_items }}</td>
    <td>${{ inv.total }}</td>
  </tr>
  {% endfor %}
</table>
{% endblock %}
