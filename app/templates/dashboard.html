{% extends "base.html" %}
{% block content %}
<div class="container-fluid py-4">

  <!-- Stat Cards -->
  <div class="row g-4">
    <div class="col-md-3 col-6">
      <div class="card shadow-sm text-center">
        <div class="card-body">
          <h5 class="text-muted">Revenue</h5>
          <h3 class="fw-bold">${{ total_revenue }}</h3>
        </div>
      </div>
    </div>
    <div class="col-md-3 col-6">
      <div class="card shadow-sm text-center">
        <div class="card-body">
          <h5 class="text-muted">Invoices</h5>
          <h3 class="fw-bold">{{ total_invoices }}</h3>
        </div>
      </div>
    </div>
    <div class="col-md-3 col-6">
      <div class="card shadow-sm text-center">
        <div class="card-body">
          <h5 class="text-muted">Vendors</h5>
          <h3 class="fw-bold">{{ total_vendors }}</h3>
        </div>
      </div>
    </div>
    <div class="col-md-3 col-6">
      <div class="card shadow-sm text-center">
        <div class="card-body">
          <h5 class="text-muted">Products</h5>
          <h3 class="fw-bold">{{ total_products }}</h3>
        </div>
      </div>
    </div>
  </div>

  <!-- Charts Row -->
  <div class="row mt-4">
    <div class="col-lg-6">
      <div class="card shadow-sm">
        <div class="card-body">
          <h5 class="card-title">Revenue by Month</h5>
          <canvas id="revenueChart"></canvas>
        </div>
      </div>
    </div>
    <div class="col-lg-6">
      <div class="card shadow-sm">
        <div class="card-body">
          <h5 class="card-title">Invoices by Status</h5>
          <canvas id="statusChart"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- Recent Invoices -->
  <div class="card shadow-sm mt-4">
    <div class="card-body">
      <h5 class="card-title">Recent Invoices</h5>
      <div class="table-responsive">
        <table class="table align-middle">
          <thead class="table-light">
            <tr><th>Invoice</th><th>Vendor</th><th>Status</th><th>Total</th></tr>
          </thead>
          <tbody>
            {% for inv in recent_invoices %}
            <tr>
              <td>{{ inv.invoice_number }}</td>
              <td>{{ inv.vendor_name }}</td>
              <td><span class="badge bg-{{ 'success' if inv.status=='Paid' else 'warning' if inv.status=='Pending' else 'danger' }}">{{ inv.status }}</span></td>
              <td>${{ inv.total }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<script>
const revenueChart = new Chart(document.getElementById('revenueChart'), {
  type: 'bar',
  data: {
    labels: ["Jan","Feb","Mar","Apr","May","Jun"],
    datasets: [{
      label: "Revenue",
      data: [1200, 1500, 1800, 2000, 1700, 2100],
      backgroundColor: "rgba(54,162,235,0.7)"
    }]
  }
});

const statusChart = new Chart(document.getElementById('statusChart'), {
  type: 'pie',
  data: {
    labels: ["Paid", "Pending", "Overdue"],
    datasets: [{
      data: [10, 5, 2],
      backgroundColor: ["#28a745", "#ffc107", "#dc3545"]
    }]
  }
});
</script>
{% endblock %}
