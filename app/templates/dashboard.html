{% extends "base.html" %}
{% block content %}
<div class="p-6 md:p-8 space-y-6">
  <!-- Stat Cards -->
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
    <div class="bg-white rounded-2xl p-6 shadow-md text-center">
      <h5 class="text-gray-500 text-sm font-medium">Revenue</h5>
      <h3 class="text-gray-900 text-2xl font-bold mt-2">${{ total_revenue }}</h3>
    </div>
    <div class="bg-white rounded-2xl p-6 shadow-md text-center">
      <h5 class="text-gray-500 text-sm font-medium">Invoices</h5>
      <h3 class="text-gray-900 text-2xl font-bold mt-2">{{ total_invoices }}</h3>
    </div>
    <div class="bg-white rounded-2xl p-6 shadow-md text-center">
      <h5 class="text-gray-500 text-sm font-medium">Vendors</h5>
      <h3 class="text-gray-900 text-2xl font-bold mt-2">{{ total_vendors }}</h3>
    </div>
    <div class="bg-white rounded-2xl p-6 shadow-md text-center">
      <h5 class="text-gray-500 text-sm font-medium">Products</h5>
      <h3 class="text-gray-900 text-2xl font-bold mt-2">{{ total_products }}</h3>
    </div>
  </div>

  <!-- Charts Row -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    <div class="bg-white rounded-2xl p-6 shadow-md">
      <h5 class="text-gray-900 text-lg font-semibold mb-4">Revenue by Month</h5>
      <canvas id="revenueChart"></canvas>
    </div>
    <div class="bg-white rounded-2xl p-6 shadow-md">
      <h5 class="text-gray-900 text-lg font-semibold mb-4">Invoices by Status</h5>
      <canvas id="statusChart"></canvas>
    </div>
  </div>

  <!-- Recent Invoices -->
  <div class="bg-white rounded-2xl p-6 shadow-md">
    <h5 class="text-gray-900 text-lg font-semibold mb-4">Recent Invoices</h5>
    <div class="overflow-x-auto">
      <table class="w-full border border-gray-200 rounded-xl text-left">
        <thead class="bg-gray-50">
          <tr>
            <th class="text-blue-900 font-medium text-base px-6 py-4">Invoice</th>
            <th class="text-blue-900 font-medium text-base px-6 py-4">Vendor</th>
            <th class="text-blue-900 font-medium text-base px-6 py-4">Status</th>
            <th class="text-blue-900 font-medium text-base px-6 py-4">Total</th>
          </tr>
        </thead>
        <tbody>
          {% for inv in recent_invoices %}
          <tr>
            <td class="text-black text-lg font-normal px-6 py-5">{{ inv.invoice_number }}</td>
            <td class="text-black text-lg font-normal px-6 py-5">{{ inv.vendor_name }}</td>
            <td class="text-black text-lg font-normal px-6 py-5"><span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-sm font-medium {{ 'bg-green-100 text-green-800' if inv.status=='Paid' else 'bg-yellow-100 text-yellow-800' if inv.status=='Pending' else 'bg-red-100 text-red-800' }}">{{ inv.status }}</span></td>
            <td class="text-black text-lg font-normal px-6 py-5">${{ inv.total }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>

<script>
const revenueChart = new Chart(document.getElementById('revenueChart'), {
  type: 'bar',
  data: {
    labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun"],
    datasets: [{
      label: "Revenue",
      data: [1200, 1500, 1800, 2000, 1700, 2100],
      backgroundColor: "rgba(54,162,235,0.7)"
    }]
  },
  options: { responsive: true, maintainAspectRatio: false }
});

const statusChart = new Chart(document.getElementById('statusChart'), {
  type: 'pie',
  data: {
    labels: ["Paid", "Pending", "Overdue"],
    datasets: [{
      data: [10, 5, 2],
      backgroundColor: ["#28a745", "#ffc107", "#dc3545"]
    }]
  },
  options: { responsive: true, maintainAspectRatio: false }
});
</script>
{% endblock %}